<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Time Master Clock</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background: #f0f0f0;
      }

      .clock-container {
        background: white;
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        text-align: center;
        min-width: 300px;
      }

      #digital-display {
        font-size: 3rem;
        margin: 1rem 0;
        font-family: monospace;
        color: #333;
      }

      .analog-clock {
        width: 200px;
        height: 200px;
        margin: 1rem auto;
        position: relative;
      }

      .clock-face {
        fill: white;
        stroke: #333;
        stroke-width: 2;
      }

      .hand {
        transform-origin: 100px 100px;
        transition: transform 0.5s cubic-bezier(0.4, 2.08, 0.55, 0.44);
      }

      .hour-markers text {
        font-size: 12px;
        text-anchor: middle;
        dominant-baseline: middle;
        fill: #333;
      }

      .controls {
        display: flex;
        gap: 1rem;
        margin: 1rem 0;
        justify-content: center;
        flex-wrap: wrap;
      }

      button {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 0.5rem;
        background: #007bff;
        color: white;
        cursor: pointer;
      }

      button:hover {
        background: #0056b3;
      }

      .alarm-section {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid #eee;
      }

      #alarm-time {
        padding: 0.5rem;
        margin-right: 0.5rem;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="clock-container">
      <div id="digital-display">00:00:00</div>

      <svg
        id="analog-display"
        class="analog-clock hidden"
        viewBox="0 0 200 200">
        <!-- Clock face -->
        <circle class="clock-face" cx="100" cy="100" r="95" />

        <!-- Hour markers -->
        <g class="hour-markers">
          <text x="100" y="20">12</text>
          <text x="150" y="100">3</text>
          <text x="100" y="180">6</text>
          <text x="50" y="100">9</text>
        </g>

        <!-- Clock hands -->
        <line
          class="hand hour-hand"
          x1="100"
          y1="100"
          x2="100"
          y2="50"
          stroke="#333"
          stroke-width="4"
          stroke-linecap="round" />
        <line
          class="hand minute-hand"
          x1="100"
          y1="100"
          x2="100"
          y2="40"
          stroke="#666"
          stroke-width="3"
          stroke-linecap="round" />
        <line
          class="hand second-hand"
          x1="100"
          y1="100"
          x2="100"
          y2="30"
          stroke="#e74c3c"
          stroke-width="2"
          stroke-linecap="round" />

        <!-- Center dot -->
        <circle cx="100" cy="100" r="3" fill="#333" />
      </svg>

      <div class="controls">
        <button id="toggle-display">Toggle Analog/Digital</button>
        <button id="toggle-format">Toggle 12/24 Hour</button>
        <button id="change-color">Change Color</button>
      </div>
      <div class="alarm-section">
        <input type="time" id="alarm-time" />
        <button id="set-alarm">Set Alarm</button>
      </div>
    </div>

    <script>
      class Clock {
        constructor() {
          this.is24Hour = true;
          this.isDigital = true;
          this.alarmTime = null;
          this.digitalDisplay = document.getElementById("digital-display");
          this.analogDisplay = document.getElementById("analog-display");
          this.colors = ["#333", "#e74c3c", "#2ecc71", "#3498db", "#9b59b6"];
          this.currentColorIndex = 0;

          // Initialize the clock
          this.updateClock();
          setInterval(() => this.updateClock(), 1000);

          // Event listeners
          document
            .getElementById("toggle-display")
            .addEventListener("click", () => this.toggleDisplay());
          document
            .getElementById("toggle-format")
            .addEventListener("click", () => this.toggleFormat());
          document
            .getElementById("change-color")
            .addEventListener("click", () => this.changeColor());
          document
            .getElementById("set-alarm")
            .addEventListener("click", () => this.setAlarm());
        }

        getCurrentTime() {
          const now = new Date();
          return {
            hours: now.getHours(),
            minutes: now.getMinutes(),
            seconds: now.getSeconds(),
          };
        }

        getFormattedTime() {
          const time = this.getCurrentTime();
          if (this.is24Hour) {
            return `${String(time.hours).padStart(2, "0")}:${String(
              time.minutes
            ).padStart(2, "0")}:${String(time.seconds).padStart(2, "0")}`;
          } else {
            const hours = time.hours % 12 || 12;
            const ampm = time.hours >= 12 ? "PM" : "AM";
            return `${String(hours).padStart(2, "0")}:${String(
              time.minutes
            ).padStart(2, "0")}:${String(time.seconds).padStart(
              2,
              "0"
            )} ${ampm}`;
          }
        }

        updateAnalogClock() {
          const time = this.getCurrentTime();

          // Calculate angles for hands
          const secondAngle = time.seconds * 6 - 90; // 6 degrees per second, -90 to start at 12
          const minuteAngle = time.minutes * 6 + time.seconds * 0.1 - 90; // 6 degrees per minute
          const hourAngle = time.hours * 30 + time.minutes * 0.5 - 90; // 30 degrees per hour

          // Update hand positions
          const secondHand = this.analogDisplay.querySelector(".second-hand");
          const minuteHand = this.analogDisplay.querySelector(".minute-hand");
          const hourHand = this.analogDisplay.querySelector(".hour-hand");

          secondHand.style.transform = `rotate(${secondAngle}deg)`;
          minuteHand.style.transform = `rotate(${minuteAngle}deg)`;
          hourHand.style.transform = `rotate(${hourAngle}deg)`;
        }

        updateClock() {
          if (this.isDigital) {
            this.digitalDisplay.textContent = this.getFormattedTime();
          } else {
            this.updateAnalogClock();
          }
          this.checkAlarm();
        }

        toggleDisplay() {
          this.isDigital = !this.isDigital;
          this.digitalDisplay.classList.toggle("hidden");
          this.analogDisplay.classList.toggle("hidden");
        }

        toggleFormat() {
          this.is24Hour = !this.is24Hour;
          if (this.isDigital) {
            this.updateClock();
          }
        }

        changeColor() {
          this.currentColorIndex =
            (this.currentColorIndex + 1) % this.colors.length;
          const newColor = this.colors[this.currentColorIndex];

          if (this.isDigital) {
            this.digitalDisplay.style.color = newColor;
          } else {
            const hands = this.analogDisplay.querySelectorAll(".hand");
            hands.forEach((hand) => (hand.style.stroke = newColor));
          }
        }

        setAlarm() {
          const alarmInput = document.getElementById("alarm-time");
          if (alarmInput.value) {
            this.alarmTime = alarmInput.value;
            alert(`Alarm set for ${this.alarmTime}`);
          }
        }

        checkAlarm() {
          if (this.alarmTime) {
            const now = new Date();
            const currentTime = `${String(now.getHours()).padStart(
              2,
              "0"
            )}:${String(now.getMinutes()).padStart(2, "0")}`;

            if (currentTime === this.alarmTime) {
              alert("ALARM!");
              this.alarmTime = null;
              document.getElementById("alarm-time").value = "";
            }
          }
        }
      }

      // Initialize the clock
      const clock = new Clock();
    </script>
  </body>
</html>
